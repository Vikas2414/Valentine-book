<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Favorite Person</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Georgia", serif; }
        
        body {
            height: 100vh;
            background: radial-gradient(circle at top, #ff9a9e, #fad0c4);
            display: flex; justify-content: center; align-items: center;
            overflow: hidden;
        }

        /* --- PROPOSAL SECTION --- */
        #proposal-section {
            text-align: center;
            z-index: 20;
            transition: opacity 0.8s ease;
        }

        .proposal-card {
            background: rgba(255, 255, 255, 0.9);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-width: 90%;
            width: 400px;
        }

        .proposal-card img {
            width: 100%;
            border-radius: 15px;
            margin-bottom: 15px;
        }

        h1 { color: #ff5f6d; margin-bottom: 20px; font-size: 26px; }
        
        .btn-group {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            position: relative;
            height: 50px; /* Kept fixed to prevent layout jumping */
        }

        button {
            padding: 12px 25px;
            font-size: 18px;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            transition: 0.3s;
            z-index: 100;
        }

        #yes-btn { background: #ff5f6d; color: white; }
        #no-btn { background: #eee; color: #666; position: absolute; left: 60%; }

        /* --- BOOK SECTION (Hidden initially) --- */
        #book-wrapper {
            display: none;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .book { width: 340px; height: 480px; perspective: 1500px; position: relative; }

        .page {
            position: absolute; width: 100%; height: 100%;
            background: linear-gradient(145deg, #ff5f6d, #ffc371);
            border-radius: 18px; box-shadow: 0 15px 40px rgba(0,0,0,0.25);
            transform-origin: left; transform-style: preserve-3d;
            transition: transform 1s cubic-bezier(0.645, 0.045, 0.355, 1);
            padding: 22px; color: #fff;
        }

        .page.flipped { transform: rotateY(-180deg); }
        .page-content { backface-visibility: hidden; height: 100%; display: flex; flex-direction: column; justify-content: space-between; align-items: center; }
        
        /* Floating hearts */
        .heart { position: absolute; bottom: -20px; color: rgba(255,255,255,0.8); animation: floatUp linear infinite; pointer-events: none; }
        @keyframes floatUp { from { transform: translateY(0); opacity: 1; } to { transform: translateY(-120vh); opacity: 0; } }

        .gif-box { background: rgba(255,255,255,0.25); padding: 8px; border-radius: 14px; width: 100%; }
        .gif-box img { width: 100%; border-radius: 12px; }
        .next { font-size: 26px; cursor: pointer; animation: bounce 1.5s infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(6px); } }

        /* Lock Overlay */
        .lock-overlay {
            position: absolute; inset: 0; background: #ff758c; border-radius: 18px;
            display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10;
        }
        .lock-overlay.hidden { display: none; }
        .lock-input { border: none; border-radius: 10px; padding: 10px; margin-bottom: 10px; text-align: center; }
    </style>
</head>
<body>

    <div id="proposal-section">
        <div class="proposal-card">
            <img id="proposal-gif" src="https://media.tenor.com/ecMcHeDqY1SAAAAj/panda-bear.gif" alt="Cute Bear">
            <h1>Will you be my Valentine?</h1>
            <div class="btn-group">
                <button id="yes-btn">YES! ‚ù§Ô∏è</button>
                <button id="no-btn">No</button>
            </div>
        </div>
    </div>

    <div id="book-wrapper">
        <div class="book">
            <div class="page" style="z-index: 5;">
                <div class="lock-overlay" id="lock">
                    <p style="margin-bottom:10px">One more thing... password?</p>
                    <input type="password" id="lockInput" class="lock-input" placeholder="Hint: L_ _ E">
                    <button id="unlockBtn" style="background:white; color:#ff5f6d; padding: 5px 15px;">Unlock</button>
                </div>
                <div class="page-content">
                    <h2>You said YES! üåπ</h2>
                    <p>Now, let's take a little trip through my heart...<br><br>Turn the pages to see why you're so special.</p>
                    <div class="next">‚û°Ô∏è</div>
                </div>
            </div>

            <div class="page" style="z-index: 4;">
                <div class="page-content">
                    <h2 style="font-size:20px;">The Best Decision ü´†</h2>
                    <div class="gif-box"><img src="https://media.tenor.com/hmYv6-dCkGgAAAAi/bubu-dudu-bubu.gif"></div>
                    <p>Loving you was my best decision ever.<br>My comfort place. üêª</p>
                    <div class="next">‚û°Ô∏è</div>
                </div>
            </div>

            <div class="page" style="z-index: 3;">
                <div class="page-content">
                    <h2 style="font-size:18px;">Your Firebrigade üöí</h2>
                    <div class="gif-box"><img src="https://media.tenor.com/0BlLAI6vIhoAAAAi/tkthao219-bubududu.gif"></div>
                    <p>Sorry for the times I'm a handful.<br>I'll never let you stay angry for long!</p>
                    <div class="next">‚û°Ô∏è</div>
                </div>
            </div>

            <div class="page" style="z-index: 2;">
                <div class="page-content">
                    <h2>Our Future ‚ú®</h2>
                    <div class="gif-box"><img src="https://media.tenor.com/5T9NoewNL9EAAAAi/bubu-dudu.gif"></div>
                    <p>I'm manifesting our wedding day.<br>Promises kept, forever to go. ‚ù§Ô∏è</p>
                    <div class="next">‚û°Ô∏è</div>
                </div>
            </div>

            <div class="page" style="z-index: 1;">
                <div class="page-content" style="justify-content: flex-start;">
                    <h2>Forever Yours ‚ù§Ô∏è</h2>
                    <p style="margin-top:20px; font-size:13px; text-align: justify;">
                        Lost the moment I saw those beautiful brown eyes... that "love at first sight" feeling was real.<br><br>
                        I look for you in every dream. I might be irritating, but I love you more than you imagine.<br><br>
                        Happy Valentine's Day, my love! üåπ
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- GIF CONFIGURATION ---
        const gifElement = document.getElementById('proposal-gif');
        const gifs = {
            default: "https://media.tenor.com/ecMcHeDqY1SAAAAj/panda-bear.gif", // Asking
            angry:   "https://media.tenor.com/cGV5OMz9NaAAAAAj/bear-panda.gif",   // Angry
            sad:     "https://media.tenor.com/cFUxnfAGL3OAAAAj/cute-panda.gif",   // Sad
            happy:   "https://media.tenor.com/Ex0s5r-M3zUAAAAi/bubu-dudu-kiss.gif" // Happy (Kiss)
        };

        // 1. "No" Button behavior
        const noBtn = document.getElementById('no-btn');
        let noClickCount = 0;

        noBtn.onmouseover = () => {
            // Move the button
            const x = Math.random() * (window.innerWidth - 100);
            const y = Math.random() * (window.innerHeight - 50);
            noBtn.style.position = 'fixed';
            noBtn.style.left = x + 'px';
            noBtn.style.top = y + 'px';

            // Change GIF based on attempts
            noClickCount++;
            if(noClickCount === 1) {
                gifElement.src = gifs.angry; // First try: Angry
            } else {
                gifElement.src = gifs.sad;   // Subsequent tries: Sad
            }
        };

        // 2. "Yes" Button behavior
        const yesBtn = document.getElementById('yes-btn');
        yesBtn.onclick = () => {
            // 1. Change to Happy GIF immediately
            gifElement.src = gifs.happy;

            // 2. Trigger Confetti
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });

            // 3. Hide Proposal / Show Book after a short delay
            setTimeout(() => {
                document.getElementById('proposal-section').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('proposal-section').style.display = 'none';
                    const book = document.getElementById('book-wrapper');
                    book.style.display = 'block';
                    setTimeout(() => book.style.opacity = '1', 50);
                }, 800);
            }, 1500); // Wait 1.5s so she can see the happy gif
        };

        // 3. Password Lock (Allow Enter key)
        const unlock = () => {
            const pass = document.getElementById('lockInput').value.toUpperCase();
            if(pass === "LOVE") {
                document.getElementById('lock').classList.add('hidden');
            } else {
                alert("Incorrect Password üíî");
            }
        }
        document.getElementById('unlockBtn').onclick = unlock;
        document.getElementById('lockInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') unlock();
        });

        // 4. Page Flipping
        document.querySelectorAll(".page").forEach(page => {
            const next = page.querySelector(".next");
            if (next) next.onclick = () => page.classList.add("flipped");
        });

        // 5. Background Hearts
        function createHeart() {
            const heart = document.createElement("div");
            heart.className = "heart";
            heart.textContent = "‚ù§";
            heart.style.left = Math.random() * 100 + "vw";
            heart.style.fontSize = (10 + Math.random() * 20) + "px";
            heart.style.animationDuration = (3 + Math.random() * 3) + "s";
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 6000);
        }
        setInterval(createHeart, 300);
    </script>
</body>
</html>
